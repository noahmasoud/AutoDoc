<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Dashboard</h1>
    <p class="subtitle">Welcome to AutoDoc - Your automated documentation assistant</p>
  </div>

  <div *ngIf="isLoading" class="loading-state" role="status" aria-label="Loading dashboard">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Loading dashboard...</p>
  </div>

  <div *ngIf="!isLoading" class="dashboard-content">
    <!-- Statistics Cards -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon connection-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
            <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
            <line x1="12" y1="22.08" x2="12" y2="12"></line>
          </svg>
        </div>
        <div class="stat-content">
          <h3>Connection</h3>
          <p class="stat-value" [class.configured]="connectionStatus === 'configured'">
            {{ connectionStatus === 'configured' ? 'Configured' : 'Not Configured' }}
          </p>
          <p class="stat-detail" *ngIf="connectionStatus === 'configured'">{{ connectionUrl }}</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon rules-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14 2 14 8 20 8"></polyline>
            <line x1="16" y1="13" x2="8" y2="13"></line>
            <line x1="16" y1="17" x2="8" y2="17"></line>
            <polyline points="10 9 9 9 8 9"></polyline>
          </svg>
        </div>
        <div class="stat-content">
          <h3>Rules</h3>
          <p class="stat-value">{{ rulesCount }}</p>
          <p class="stat-detail">Active rules</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon templates-icon">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14 2 14 8 20 8"></polyline>
            <line x1="16" y1="13" x2="8" y2="13"></line>
            <line x1="16" y1="17" x2="8" y2="17"></line>
          </svg>
        </div>
        <div class="stat-content">
          <h3>Templates</h3>
          <p class="stat-value">{{ templatesCount }}</p>
          <p class="stat-detail">Available templates</p>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions-section">
      <h2>Quick Actions</h2>
      <div class="actions-grid">
        <a routerLink="/connections" class="action-card" [class.priority]="connectionStatus === 'not-configured'">
          <div class="action-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
            </svg>
          </div>
          <div class="action-content">
            <h3>Configure Connection</h3>
            <p>Set up your Confluence connection</p>
            <span *ngIf="connectionStatus === 'not-configured'" class="badge">Required</span>
          </div>
        </a>

        <a routerLink="/rules" class="action-card">
          <div class="action-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
            </svg>
          </div>
          <div class="action-content">
            <h3>Manage Rules</h3>
            <p>Create and edit documentation rules</p>
          </div>
        </a>

        <a routerLink="/templates" class="action-card">
          <div class="action-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
            </svg>
          </div>
          <div class="action-content">
            <h3>Manage Templates</h3>
            <p>Configure documentation templates</p>
          </div>
        </a>
      </div>
    </div>

    <!-- Getting Started Guide -->
    <div class="getting-started-section" *ngIf="connectionStatus === 'not-configured' || rulesCount === 0">
      <h2>Getting Started</h2>
      <div class="guide-steps">
        <div class="guide-step" *ngIf="connectionStatus === 'not-configured'">
          <div class="step-number">1</div>
          <div class="step-content">
            <h3>Configure Confluence Connection</h3>
            <p>Set up your Confluence base URL, space key, and API token to connect AutoDoc to your Confluence instance.</p>
            <a routerLink="/connections" class="step-link">Configure Connection →</a>
          </div>
        </div>

        <div class="guide-step" *ngIf="connectionStatus === 'configured' && rulesCount === 0">
          <div class="step-number">2</div>
          <div class="step-content">
            <h3>Create Your First Rule</h3>
            <p>Define rules that map code changes to Confluence documentation pages. Rules use glob patterns or regex to match file paths.</p>
            <a routerLink="/rules" class="step-link">Create Rule →</a>
          </div>
        </div>

        <div class="guide-step" *ngIf="connectionStatus === 'configured' && rulesCount > 0 && templatesCount === 0">
          <div class="step-number">3</div>
          <div class="step-content">
            <h3>Add Documentation Templates</h3>
            <p>Create templates to standardize how documentation is generated from code changes.</p>
            <a routerLink="/templates" class="step-link">Create Template →</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

